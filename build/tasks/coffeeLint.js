// Generated by CoffeeScript 1.3.3
/*global module, require
*/

module.exports = function(grunt) {
  var coffeeLint, path;
  coffeeLint = require('coffeelint');
  path = require('path');
  return grunt.registerMultiTask('coffeeLint', 'Lints CoffeeScript files', function() {
    var config, files, message, src;
    src = this.file.src;
    config = this.data;
    files = grunt.file.expandFiles(src);
    message = '';
    files.forEach(function(file, index) {
      var errors, fullPath, source;
      source = grunt.file.read(file);
      errors = coffeeLint.lint(source, config);
      if (!errors.length) {
        return;
      }
      fullPath = path.resolve(file);
      message += "" + fullPath + "\n";
      errors.forEach(function(error) {
        return message += "#" + error.lineNumber + ": " + error.message + "\n";
      });
      return message += '\n';
    });
    if (!message.length) {
      return;
    }
    return grunt.log.writeln(message);
  });
};
